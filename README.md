# Система онлайн-заказа продуктов питания

## Функциональность

### Каталог товаров
- Просмотр списка всех товаров с пагинацией
- Фильтрация по категориям (фрукты, овощи, молочные продукты и пр.)
- Поиск товаров по названию и описанию
- Детальная информация о товаре (цена, описание, рейтинг)

### Корзина покупок
- Добавление/удаление товаров
- Изменение количества товаров
- Расчет стоимости с учетом количества
- Сохранение содержимого корзины между сессиями

### Оформление заказа
- Выбор адреса доставки
- Выбор способа оплаты (кредитная карта, наличные, банковский перевод, онлайн-оплата)
- Выбор метода доставки (стандартная, экспресс, самовывоз)
- Подтверждение заказа

### Отслеживание заказа
- Просмотр статуса заказа (создан, обрабатывается, доставляется, доставлен, отменен)
- История изменений статуса
- Список всех заказов пользователя

### Аутентификация и профиль
- Регистрация новых пользователей
- Вход/выход из аккаунта
- Управление личными данными (имя, адрес, телефон)
- Просмотр истории заказов

## Архитектура проекта

### Модульная структура
Проект организован по принципу модульной архитектуры, где каждый функциональный компонент выделен в отдельный модуль (Blueprint):

- **auth** - аутентификация и управление пользователями
- **catalog** - управление каталогом товаров
- **cart** - функционал корзины покупок
- **order** - оформление и отслеживание заказов

### Модели данных

#### User (Пользователь)
- Базовая информация (имя пользователя, email, пароль)
- Персональные данные (имя, фамилия, телефон, адрес)
- Связь с заказами

#### Product и Category (Товар и Категория)
- Информация о товаре (название, описание, цена, наличие)
- Дополнительные характеристики (рейтинг, производитель)
- Категоризация товаров

#### CartItem (Элемент корзины)
- Связь с пользователем и товаром
- Количество товара
- Расчет промежуточной суммы

#### Order и OrderItem (Заказ и Элемент заказа)
- Информация о заказе (пользователь, статус, общая сумма)
- Детали доставки и оплаты
- Элементы заказа с ценой на момент заказа
- История изменений статуса

### Технический стек

#### Backend
- **Python 3.8+** - основной язык программирования
- **Flask 2.3.3** - веб-фреймворк
- **SQLAlchemy 3.0.5** - ORM для работы с базой данных
- **Flask-Login 0.6.2** - управление пользовательскими сессиями
- **Flask-WTF 1.1.1** - работа с формами
- **Flask-Migrate 4.0.4** - миграции базы данных
- **Werkzeug 2.3.7** - WSGI-утилиты (фиксированная версия для совместимости)

#### Frontend
- **Bootstrap 5** - CSS-фреймворк для отзывчивого интерфейса
- **Jinja2** - шаблонизатор для генерации HTML
- **SVG-иконки** - векторные изображения для категорий товаров

#### База данных
- **SQLite** - для разработки и тестирования
- Поддержка других СУБД через SQLAlchemy (PostgreSQL, MySQL)

#### Дополнительные компоненты
- **python-dotenv** - управление переменными окружения
- **Pillow** - обработка изображений
- **email-validator** - валидация email-адресов

## Установка и запуск

### Требования
- Python 3.8 или выше
- pip (менеджер пакетов Python)
- Git (для клонирования репозитория)

### Шаги установки

1. Создать и активировать виртуальное окружение:
```
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate  # Windows
```

2. Установить зависимости:
```
pip install -r requirements.txt
```

3. Создать файл .env с настройками:
```
SECRET_KEY=your-secret-key-here
DATABASE_URL=sqlite:///food_delivery.db
FLASK_APP=app.py
FLASK_ENV=development
```

4. Создать базу данных:
```
flask db init
flask db migrate -m "Initial migration"
flask db upgrade
```

5. Заполнить базу тестовыми данными:
```
python seed.py
```

6. Запустить приложение:
```
flask run
```

Приложение будет доступно по адресу http://localhost:5000

## Структура директорий

```
food_delivery/
├── app/                       # Основной пакет приложения
│   ├── auth/                  # Модуль аутентификации
│   │   ├── __init__.py        # Инициализация Blueprint
│   │   ├── forms.py           # Формы для аутентификации
│   │   └── routes.py          # Маршруты аутентификации
│   ├── cart/                  # Модуль корзины
│   │   ├── __init__.py        # Инициализация Blueprint
│   │   └── routes.py          # Маршруты корзины
│   ├── catalog/               # Модуль каталога товаров
│   │   ├── __init__.py        # Инициализация Blueprint
│   │   └── routes.py          # Маршруты каталога
│   ├── models/                # Модели данных
│   │   ├── __init__.py
│   │   ├── cart.py            # Модель корзины
│   │   ├── order.py           # Модели заказов
│   │   ├── product.py         # Модели товаров и категорий
│   │   └── user.py            # Модель пользователя
│   ├── order/                 # Модуль заказов
│   │   ├── __init__.py        # Инициализация Blueprint
│   │   └── routes.py          # Маршруты заказов
│   ├── static/                # Статические файлы
│   │   ├── css/               # CSS стили
│   │   ├── js/                # JavaScript
│   │   └── img/               # Изображения и SVG-иконки
│   ├── templates/             # HTML шаблоны
│   │   ├── auth/              # Шаблоны аутентификации
│   │   ├── cart/              # Шаблоны корзины
│   │   ├── catalog/           # Шаблоны каталога
│   │   ├── order/             # Шаблоны заказов
│   │   └── base.html          # Базовый шаблон
│   └── __init__.py            # Инициализация приложения
├── migrations/                # Миграции базы данных
├── .env                       # Переменные окружения
├── app.py                     # Точка входа в приложение
├── config.py                  # Конфигурация приложения
├── requirements.txt           # Зависимости
├── seed.py                    # Скрипт для заполнения БД
└── README.md                  # Документация
```

## Разработка

### Создание новых миграций при изменении моделей
```
flask db migrate -m "Описание изменений"
flask db upgrade
```# Model
